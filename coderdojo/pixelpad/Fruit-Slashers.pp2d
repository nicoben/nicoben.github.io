{"assets":{"script":[{"Game":{"type":"game script","start":"set_room('Start')\n","loop":""}}],"room":[{"Start":{"type":"room script","start":"background = new_object('Background')\n\nself.titleText = new_text(\"Fruit Slashers\", -360, 320)\nself.titleText.color = \"black\"\nself.titleText.fontSize = 120\n\nself.instructionsText = new_text(\"Press enter to start\", -170, -280)\nself.instructionsText.color = \"red\"\nself.instructionsText.fontSize = 40\n","loop":"if key_is_pressed('Enter'):\n    room_set('Play')\n"}},{"Play":{"type":"room script","start":"background = Background()\nspawner = Spawner()\nslicer = Slicer()\n\ngame.score = 0\ngame.scoreText = new_text('Score: 0', 0.95 * SCREEN_MIN_X, 0.9 * SCREEN_MAX_Y)\ngame.scoreText.fontSize = 50\n\ngame.countdownTimer = 60 * FPS\ngame.countdownText = new_text('Left: 60', SCREEN_MAX_X - 200, 0.9 * SCREEN_MAX_Y)\ngame.countdownText.fontSize = 50\n","loop":"game.countdownTimer -= 1\ngame.countdownText.text = f'Left: {round(game.countdownTimer / FPS)}'\n\nif game.countdownTimer <= 0:\n    set_room('Result')\n"}},{"Result":{"type":"room script","start":"background = new_object('Background')\n\nself.titleText = new_text(f\"Score: {game.score}\", -250, 320)\nself.titleText.color = \"black\"\nself.titleText.fontSize = 120\n\nself.instructionsText = new_text(\"Press enter to restart\", -170, -280)\nself.instructionsText.color = \"red\"\nself.instructionsText.fontSize = 40\n","loop":"if key_is_pressed('Enter'):\n    room_set('Play')\n"}}],"texture":[{"background.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663605131.background.png"}},{"apple.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663603706.apple.png"}},{"banana.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663603748.banana.png"}},{"eggplant.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663603772.eggplant.png"}},{"orange.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663603734.orange.png"}},{"pear.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663603719.pear.png"}},{"watermelon.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663603762.watermelon.png"}},{"bomb.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663603795.bomb.png"}},{"slicer.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663605410.slicer.png"}},{"trail.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663610395.trail.png"}},{"apple_splash.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663787630.apple_splash.png"}},{"eggplant_splash.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663787613.eggplant_splash.png"}},{"orange_splash.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663787540.orange_splash.png"}},{"pear_splash.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663787586.pear_splash.png"}},{"watermelon_splash.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663787570.watermelon_splash.png"}},{"explosion_splash.png":{"type":"image","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663789000.explosion_splash.png"}}],"sound":[{"explosion.mp3":{"type":"audio","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663791544.explosion.mp3"}},{"woosh.wav":{"type":"audio","uri":"https://s3.us-west-1.amazonaws.com/media.pixelpad.io/__ASSET__.33310.660648.1663791747.woosh.wav"}}],"function":[{"constants.py":{"type":"function script","head":"FPS = 30 # framnes per second\n\nSCREEN_WIDTH = 1280\nSCREEN_MAX_X = SCREEN_WIDTH / 2\nSCREEN_MIN_X = -SCREEN_MAX_X\n\nSCREEN_HEIGHT = 720\nSCREEN_MAX_Y = SCREEN_HEIGHT / 2\nSCREEN_MIN_Y = -SCREEN_MAX_Y\n\nGRAVITY = 1\n"}},{"imports.py":{"type":"function script","head":"import random\n"}},{"base.py":{"type":"function script","head":"class GameBase(superclass):\n\n    def __init__(self, sprite=None):\n        super().__init__(sprite)\n        add_room_object(self)\n        self.start()\n\n    def start(self):\n        pass\n\n    def loop(self):\n        pass\n\nclass GameObject(GameBase):\n\n    def __init__(self, sprite=None):\n        self._type = \"object script\"\n        super().__init__(sprite)\n\nclass GameRoom(GameBase):\n\n    def __init__(self, sprite=None):\n        self._type = \"room script\"\n        super().__init__(sprite)\n"}},{"objects":[{"background.py":{"type":"function script","head":"class Background(GameObject):\n\n    def start(self):\n        self.sprite = new_sprite('background.png')\n\n    def loop(self):\n        pass\n"}},{"fruit.py":{"type":"function script","head":"class Fruit(GameObject):\n\n    FRUITS = [\n        (False, new_sprite('apple.png'), new_sprite('apple_splash.png', 2, 4), 0.6, lambda score: score + 1), \n        (False, new_sprite('banana.png'), new_sprite('pear_splash.png', 2, 4), 0.6, lambda score: int(1.05 * score + 1)), \n        (False, new_sprite('eggplant.png'), new_sprite('eggplant_splash.png', 2, 4), 0.6, lambda score: score + 3), \n        (False, new_sprite('orange.png'), new_sprite('orange_splash.png', 2, 4), 0.6, lambda score: score + 4), \n        (False, new_sprite('pear.png'), new_sprite('pear_splash.png', 2, 4), 0.6, lambda score: score + 5), \n        (False, new_sprite('watermelon.png'), new_sprite('watermelon_splash.png', 2, 4), 0.6, lambda score: score + 1), \n        (True, new_sprite('bomb.png'), new_sprite('explosion_splash.png', 2, 3), 3, lambda score: 0), \n    ]\n\n    def start(self):\n        is_shake, self.sprite, self.splash_sheet, scale, self.score_func = random.choice(Fruit.FRUITS)\n        self.splash_sheet['is_shake'] = is_shake\n        self.splash_sheet['scale'] = scale\n\n        self.scaleX = 0.5\n        self.scaleY = 0.5\n\n        self.x = random.uniform(0.95 * SCREEN_MIN_X, 0.95 * SCREEN_MAX_X)\n        self.y = 1.1 * SCREEN_MIN_Y\n\n        self.speedX = random.uniform(\n            -(self.x - SCREEN_MIN_X) / SCREEN_WIDTH * 10, \n            (SCREEN_MAX_X - self.x) / SCREEN_WIDTH * 10\n        )\n\n        self.speedY = random.uniform(30, 38)\n\n    def loop(self):\n        self.x += self.speedX\n        self.y += self.speedY\n        self.speedY -= GRAVITY\n\n        if self.y < 1.05 * SCREEN_MIN_Y and self.speedY < 0:\n            destroy(self)\n"}},{"spawner.py":{"type":"function script","head":"class Spawner(GameObject):\n\n    def start(self):\n        self.visible = False\n\n        self.timer = 1 * FPS\n\n    def loop(self):\n        self.timer -= 1\n\n        if self.timer <= 0:\n            Fruit()\n            self.timer = self.randomTime() * FPS\n\n    def randomTime(self):\n        if game.score < 10:\n            mult = 1\n        elif game.score < 25:\n            mult = 0.8\n        elif game.score < 50:\n            mult = 0.6\n        elif game.score < 100:\n            mult = 0.4\n        else:\n            mult = 0.2\n        return random.uniform(mult * 1, mult * 2)\n"}},{"slicer.py":{"type":"function script","head":"class Slicer(GameObject):\n\n    def start(self):\n        self.sprite = new_sprite('slicer.png')\n\n    def loop(self):\n        previousX = self.x\n        previousY = self.y\n        \n        self.x = mouse_x()\n        self.y = mouse_y()\n\n        speedX = self.x - previousX\n        speedY = self.y - previousY\n\n        if mouse_is_pressed('left'):\n            N = 10\n            for i in range(N):\n                trail = Trail()\n                trail.x = previousX + speedX * i / N\n                trail.y = previousY + speedY * i / N\n\n            self.handleFruit()\n\n    def handleFruit(self):\n        fruit = collision_check(self, 'Fruit')\n        if fruit:\n            game.score = fruit.score_func(game.score)\n            game.scoreText.text = f'Score: {game.score}'\n\n            splash = Splash(fruit.splash_sheet)\n            splash.x = fruit.x\n            splash.y = fruit.y\n\n            destroy(fruit)\n"}},{"trail.py":{"type":"function script","head":"class Trail(GameObject):\n\n    DURATION = 0.5 * FPS\n\n    def start(self):\n        self.sprite = new_sprite('trail.png')\n\n        self.timer = Trail.DURATION\n\n    def loop(self):\n        self.scaleX = self.timer / Trail.DURATION\n        self.scaleY = self.scaleX\n\n        self.timer -= 1\n        if self.timer <= 0:\n            try:\n                destroy(self)\n            except:\n                pass\n"}},{"splash.py":{"type":"function script","head":"class Splash(GameObject):\n\n    def start(self):\n        spriteName = self.sprite['spriteName']\n        self.is_shake = self.sprite['is_shake']\n        scale = self.sprite['scale']\n        nrows = self.sprite['rows']\n        ncols = self.sprite['cols']\n        nframes = nrows * ncols\n        animation = new_animation(self.sprite, nframes, 0, nframes - 1)\n        set_animation(self, animation)\n\n        self.scaleX = scale\n        self.scaleY = self.scaleX\n\n        self.timer = 2 * nframes\n\n        sound = new_sound('explosion.mp3' if self.is_shake else 'woosh.wav')\n        play_sound(sound)\n\n    def loop(self):\n        self.timer -= 1\n\n        if self.is_shake:\n            shakeX = random.randint(-10, 10)\n            shakeY = random.randint(-10, 10)\n            set_camera(shakeX, shakeX)\n\n        if self.timer == 0:\n            set_camera(0, 0)\n            destroy(self)\n"}}]}]}}